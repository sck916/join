(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{35:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),s=n.n(r),c=n(28),o=n.n(c),i=(n(35),n(10)),u=n.n(i),l=n(13),j=n(7),b=n(9),d=n(2),h=n(11),p=n.n(h),O=Object(r.createContext)(null);function g(){var e=Object(r.useContext)(O),t=e.userData,n=e.setUserData,s=Object(d.f)();return Object(a.jsx)("nav",{className:"auth-options",children:t.user?Object(a.jsx)("button",{onClick:function(){n({token:void 0,user:void 0}),localStorage.setItem("auth-token","")},children:"Log out"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("button",{onClick:function(){return s.push("/register")},children:"Register"}),Object(a.jsx)("button",{onClick:function(){return s.push("/login")},children:"Log in"})]})})}n(59);function x(){return Object(a.jsxs)("div",{className:"header",children:[Object(a.jsx)("img",{className:"header-logo",src:"https://perrit.eu/wp-content/uploads/2015/10/JOIN-logo.png",alt:""}),Object(a.jsxs)("header",{id:"header",children:[Object(a.jsx)(b.b,{to:"/"}),Object(a.jsx)(g,{})]})]})}function m(){var e=Object(r.useContext)(O).userData;return Object(a.jsx)("div",{className:"page",children:e.user?Object(a.jsxs)("h1",{children:["Welcome ",e.user.displayName]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"You are not logged in"}),Object(a.jsx)(b.b,{to:"/login",children:"Log in"})]})})}function f(e){return Object(a.jsxs)("div",{className:"error-notice",children:[Object(a.jsx)("span",{children:e.message}),Object(a.jsx)("button",{onClick:e.clearError,children:"X"})]})}function v(){var e=Object(r.useState)(),t=Object(j.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)(),o=Object(j.a)(c,2),i=o[0],b=o[1],h=Object(r.useState)(),g=Object(j.a)(h,2),x=g[0],m=g[1],v=Object(r.useContext)(O).setUserData,k=Object(d.f)(),w=function(){var e=Object(l.a)(u.a.mark((function e(t){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,a={email:n,password:i},e.next=5,p.a.post("http://localhost:5000/users/login",a);case 5:r=e.sent,v({token:r.data.token,user:r.data.user}),localStorage.setItem("auth-token",r.data.token),k.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response.data.msg&&m(e.t0.response.data.msg);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"page",children:[Object(a.jsx)("h2",{children:"Log in"}),x&&Object(a.jsx)(f,{message:x,clearError:function(){return m(void 0)}}),Object(a.jsxs)("form",{className:"form",onSubmit:w,children:[Object(a.jsx)("label",{htmlFor:"login-email",children:"Email"}),Object(a.jsx)("input",{id:"login-email",type:"email",onChange:function(e){return s(e.target.value)}}),Object(a.jsx)("label",{htmlFor:"login-password",children:"Password"}),Object(a.jsx)("input",{id:"login-password",type:"password",onChange:function(e){return b(e.target.value)}}),Object(a.jsx)("input",{type:"submit",value:"Log in"})]})]})}function k(){var e=Object(r.useState)(),t=Object(j.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)(),o=Object(j.a)(c,2),i=o[0],b=o[1],h=Object(r.useState)(),g=Object(j.a)(h,2),x=g[0],m=g[1],v=Object(r.useState)(),k=Object(j.a)(v,2),w=k[0],C=k[1],y=Object(r.useState)(),S=Object(j.a)(y,2),N=S[0],F=S[1],D=Object(r.useContext)(O).setUserData,I=Object(d.f)(),E=function(){var e=Object(l.a)(u.a.mark((function e(t){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,a={email:n,password:i,passwordCheck:x,displayName:w},e.next=5,p.a.post("http://localhost:5000/users/register",a);case 5:return e.next=7,p.a.post("http://localhost:5000/users/login",{email:n,password:i});case 7:r=e.sent,D({token:r.data.token,user:r.data.user}),localStorage.setItem("auth-token",r.data.token),I.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.response.data.msg&&F(e.t0.response.data.msg);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"page",children:[Object(a.jsx)("h2",{children:"Register"}),N&&Object(a.jsx)(f,{message:N,clearError:function(){return F(void 0)}}),Object(a.jsxs)("form",{className:"form",onSubmit:E,children:[Object(a.jsx)("label",{htmlFor:"register-email",children:"Email"}),Object(a.jsx)("input",{id:"register-email",type:"email",onChange:function(e){return s(e.target.value)}}),Object(a.jsx)("label",{htmlFor:"register-password",children:"Password"}),Object(a.jsx)("input",{id:"register-password",type:"password",onChange:function(e){return b(e.target.value)}}),Object(a.jsx)("input",{type:"password",placeholder:"Verify password",onChange:function(e){return m(e.target.value)}}),Object(a.jsx)("label",{htmlFor:"register-display-name",children:"Display name"}),Object(a.jsx)("input",{id:"register-display-name",type:"text",onChange:function(e){return C(e.target.value)}}),Object(a.jsx)("input",{type:"submit",value:"Register"})]})]})}function w(){var e=Object(r.useState)({token:void 0,user:void 0}),t=Object(j.a)(e,2),n=t[0],s=t[1];return Object(r.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,p.a.post("http://localhost:5000/users/tokenIsValid",null,{headers:{"x-auth-token":t}});case 4:if(!e.sent.data){e.next=10;break}return e.next=8,p.a.get("http://localhost:5000/users/",{headers:{"x-auth-token":t}});case 8:n=e.sent,s({token:t,user:n.data});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(b.a,{children:Object(a.jsxs)(O.Provider,{value:{userData:n,setUserData:s},children:[Object(a.jsx)(x,{}),Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)(d.c,{children:[Object(a.jsx)(d.a,{exact:!0,path:"/",component:m}),Object(a.jsx)(d.a,{path:"/login",component:v}),Object(a.jsx)(d.a,{path:"/register",component:k})]})})]})})})}var C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,61)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(w,{})}),document.getElementById("root")),C()}},[[60,1,2]]]);
//# sourceMappingURL=main.196e7da9.chunk.js.map